# Changelog

All notable changes to the Zammad MCP Server will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### ⚠️ Breaking Changes

- **All MCP tool signatures now use Pydantic request models for input validation**
  - Tools accept a single `params` argument instead of multiple keyword arguments
  - Provides early input validation with better error messages
  - Enforces constraints (e.g., `page >= 1`, `per_page in [1..100]`)
  - **Migration required**: Update tool calls to pass parameter models

  **Example migration:**
  ```python
  # Before
  result = mcp.call_tool("zammad_search_tickets", query="test", page=1, per_page=25)

  # After
  from mcp_zammad.models import TicketSearchParams
  params = TicketSearchParams(query="test", page=1, per_page=25)
  result = mcp.call_tool("zammad_search_tickets", params=params)
  ```

### Added

- Add Pydantic request models for all MCP tools:
  - `TicketSearchParams` - Enhanced with validation constraints
  - `GetTicketParams` - For retrieving individual tickets
  - `TicketUpdateParams` - For updating tickets
  - `GetArticleAttachmentsParams` - For listing attachments
  - `DownloadAttachmentParams` - For downloading attachments
  - `TagOperationParams` - For tag add/remove operations
  - `SearchUsersParams` - For user search
  - `GetUserParams` - For retrieving users
  - `SearchOrganizationsParams` - For organization search
  - `GetOrganizationParams` - For retrieving organizations
  - `GetTicketStatsParams` - For ticket statistics
  - `ListParams` - For list operations (groups, states, priorities)

### Changed

- All tool signatures updated to accept Pydantic models for input validation
- Validation errors now occur at the tool boundary before API calls
- Improved error messages for invalid inputs

<!-- generated by git-cliff -->

## [0.1.3] - 2025-08-06

### Added

- Improve code quality and test coverage to 89.1%
- Implement comprehensive attachment support for ticket articles
- Add zammad://queue/{group} resource for ticket queue management

### Dependencies

- **deps**: Update python digest to (3.12)
- **deps**: Update python:3.13-slim Docker digest to 4c2cf99
- **deps**: Pin dependencies
- **deps**: Update docker/login-action digest to 184bdaa (v3) (#41)
- **deps**: Update docker/metadata-action digest to c1e5197 (v5.7.0)
- **deps**: Update docker/login-action digest to 184bdaa (v3.4.0)

### Documentation

- Add development setup and GitHub MCP server documentation
- Update CHANGELOG for issue #39 fix and recent changes

### Fixed

- Pin third-party GitHub Actions to commit SHAs for security
- Address pre-commit hook errors in test files
- Patch ZammadClient in test_initialize_with_envrc_warning to avoid ConfigException
- Add type ignore comments to resolve mypy errors in test_server.py
- Resolve pre-commit hook issues
- Resolve "Zammad client not initialized" error when running with uvx (#39)

### Miscellaneous Tasks

- Configure Renovate to auto-update GitHub Actions SHAs
- Update GitHub Personal Access Token handling and add new MCP commands
- Configure pre-commit hooks to be less strict for test files
- Update configuration files for MCP servers
- Bump version to 0.1.3

### Refactor

- Add proper shutdown cleanup to lifespan context manager

### Styling

- Apply ruff formatting to test files

### Testing

- Improve code coverage from 68.72% to 72.88%
- Improve code coverage from 68.72% to 91.7%
- Fix authentication tests to isolate environment variables

## [0.1.2] - 2025-07-24

### Fixed

- Update dependencies to resolve starlette security vulnerability

### Miscellaneous Tasks

- Release v0.1.2 - security update

## [0.1.1] - 2025-07-24

### Added

- Implement Zammad MCP server with 16 tools and 3 resources
- Add setup scripts for easy installation
- Add .env.example for easy configuration
- Add article pagination to get_ticket
- Add Docker support for containerized deployment

### Dependencies

- **deps**: Update astral-sh/setup-uv action to v6
- **deps**: Update python Docker tag to v3.13
- **deps**: Migrate config renovate.json
- **deps**: Update dependency python
- **deps**: Update actions/attest-build-provenance action to v2
- **deps**: Update docker/build-push-action action to v6
- **deps**: Update codacy/codacy-analysis-cli-action digest to 0991600
- **deps**: Update astral-sh/setup-uv action to v6.4.1
- **deps**: Update codacy/codacy-analysis-cli-action digest to d28ce58
- **deps**: Update astral-sh/setup-uv action to v6.4.3

### Documentation

- Add comprehensive documentation
- Add CLAUDE.md for AI assistant context
- Update README with uvx support and improved documentation
- Update documentation for recent fixes
- Add Codacy code quality badge to README
- Clean up README structure and improve script execution instructions. Finalizes left over formatting from pr #22

### Fixed

- Resolve asyncio conflict in MCP server startup
- Handle Zammad API expand behavior in models
- Remove invalid Renovate configuration options
- **ci**: Add attestations permission for attest-build-provenance v2
- Remove duplicate log_data initialization
- Resolve failing GitHub workflows
- Add missing permission for Bash(python:*) in settings.local.json
- Handle Docker Hub rate limits in Codacy workflow
- Configure Codacy to use only Python-appropriate tools
- Disable Docker-based tools in Codacy to resolve parsing errors
- Resolve Docker build and authentication issues (#32, #33)
- Revert incorrect CHANGELOG date change

### Miscellaneous Tasks

- Update .gitignore for comprehensive coverage
- Add development environment configuration
- Configure Renovate for dependency management
- Remove test.md file
- Update dependency lock file
- Clean up .gitignore and add .gitmessage template
- Add .safety-project.ini configuration file for zammad-mcp project
- **docs**: Remove outdated command documentation and examples
- Remove unused 'serena' server configuration from .mcp.json
- Update permissions in settings.local.json and improve Dockerfile comments
- Release v0.1.1

### Refactor

- Simplify environment configuration

### Styling

- Apply ruff formatting to Python files

<!-- generated by git-cliff -->
